#!/command/execlineb -P

# This is a suitable /service/dnscache/run file.
# execline is especially efficient in "run files".

multisubstitute         # performs the 2 definitions at once
{
  define MAXOPENFILES 250
  define DATALIMIT 3000000
}

fdmove -c 2 1           # redirects stderr to stdout
redirfd -r 0 seed       # redirects stdin to seed
emptyenv -p             # clears the environment
envuidgid dnscache      # prepares the UID and GID
envdir env              # reads the environment in env
softlimit -o $MAXOPENFILES -d $DATALIMIT   # sets resource limits
dnscache                # finally: execs into dnscache
